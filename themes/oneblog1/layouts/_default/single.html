{{ partial "header.html" . }}

<div class="main">
{{ partial "head2.html" . }}

{{ if .Params.thumbnail }}
<!--有封面图的文章详情页顶部样式-->
    <div class="post_thumb blur">
        <!-- 背景图片容器 -->
        <div class="post_bg lazy-load" data-src="{{ .Params.thumbnail | relURL }}"></div>
        <div class="pc">
            <!-- 新增的菜单按钮 -->
            <i class="iconfont icon-nav menu-button"></i>
            <!-- 内容容器保持不变 -->
            <div class="post_header padding animated fadeIn">
                {{ range first 1 .Params.categories }}
                <a href="{{ "/categories/" | relURL }}{{ . | urlize }}">{{ . }}</a>
                {{ end }}
                <h1>{{ .Title }}</h1>   
                <div class="post_meta">
                    <span>{{ .Date | time.Format "2006.01.02" }}</span>
                    <span>/</span>
                    <span>{{ .Params.views | default 0 }}&nbsp;阅读</span>
                    <span>/</span>
                    <span>{{ .Params.comments | default 0 }}&nbsp;评论</span>
                    <span>/</span>
                    <span>{{ .WordCount }}&nbsp;字</span>
                </div>
            </div>
        </div>
    </div>
    <div class="m blur">
        <!--当前文章所属分类 只取第一个分类-->
        <div class="category">
            {{ range first 1 .Params.categories }}
            <a href="{{ "/categories/" | relURL }}{{ . | urlize }}">{{ . }}</a>
            {{ end }}
        </div>
        
        <!--文章标题和统计-->
        <div class="post_info">
            <h1>{{ .Title }}</h1>   
            <span>阅读&nbsp;{{ .Params.views | default 0 }}</span>
            <span>{{ .Params.comments | default 0 }}&nbsp;评论</span>
            <span>发表于{{ .Date | time.Format "2006.01.02" }}</span>
        </div>
    </div>
    
    {{ else }}
    <!--没有封面图的文章详情页顶部样式-->
    <div class="post_nothumb blur animated fadeIn">
        <div class="breadcrumb">
            <li><a href="{{ .Site.BaseURL }}">首页</a><span>&gt;</span></li>
            {{ range first 1 .Params.categories }}
            <li><a href="{{ "/categories/" | relURL }}{{ . | urlize }}">{{ . }}</a><span>&gt;</span></li>
            {{ end }}
            <li>正文</li>
        </div>
        <div class="pc">
            <i class="iconfont icon-nav menu-button"></i>
        </div>
        <h1>{{ .Title }}</h1>   
        <div class="post_meta">
            <span>{{ .Date | time.Format "2006年01月02日" }}</span>
            <span>{{ .Params.views | default 0 }}&nbsp;阅读</span>
            <span>{{ .Params.comments | default 0 }}&nbsp;评论</span>
            <span>{{ .WordCount }}&nbsp;字</span>
        </div>
    </div>
    {{ end }}
    
    <!--通用文章正文-->
    <div class="post_toc">
    <h3>文章目录
    <nav id="TableOfContents">
        {{ .TableOfContents }}
    
    <div class="post_content padding blur animated fadeIn">
        {{ .Content | replaceRE "<img src=\"([^\"]+)\"" "<img src=\"$1\" data-fancybox=\"gallery\"" | safeHTML }}
        <div class="cc-say">
            本文著作权归作者 [&nbsp;<span>{{ .Params.author | default .Site.Author.name }}</span>&nbsp;] 享有，未经作者书面授权，禁止转载，封面图片来源于 [&nbsp;<span>{{ .Params.origin | default "互联网" }}</span>&nbsp;] ，本文仅供个人学习、研究和欣赏使用。如有异议，请联系博主及时处理。
        </div>
        {{ if .Params.tags }}
        <div class="tags">
            {{ range .Params.tags }}
            <a href="{{ "/tags/" | relURL }}{{ . | urlize }}">{{ . }}</a>
            {{ end }}
        </div>
        {{ end }}
    </div> 
    
    <!--通用文章评论-->
    {{ if .Site.Params.disqusShortname }}
    <div id="disqus_thread" class="padding blur"></div>
    <script>
    (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://{{ .Site.Params.disqusShortname }}.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    </script>
    {{ end }}
</div>

<!--返回顶部-->
<a id="gototop" class="hidden pc"><i class="iconfont icon-up"></i></a>

{{ partial "footer.html" . }}