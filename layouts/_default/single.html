{{ define "main" }}
<div class="articleContainer">
    <div class="article" data-id="{{ .File.UniqueID}}">
        <header class="article--header">
            <h2 class="article--headline">{{ .Title }}</h2>
            
            <div class="article--meta">
                <!-- æ–‡ç« å‘å¸ƒæ—¥æœŸ -->
                <time datetime='{{.Date.Format "2006-01-02 15:04:01" }}' class="humane--time">
                    ğŸ“ å‘å¸ƒäº {{ .Date.Format "2006-01-02 15:04" }}
                </time>
                
                {{ if .Params.categories }}
                <span class="sep">|</span>
                {{ range (.GetTerms "categories") }}
                <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
                {{ end }}
                {{ end }}
                
                {{ if .Site.Params.post_view }}
                <span class="sep">|</span>
                <span class="article--views">ğŸ‘ï¸ é˜…è¯»é‡ <span class="count">0</span></span>
                {{ end }}
            </div>

            <!-- æœ€åæ›´æ–°æ—¶é—´ï¼ˆSEOç”¨ï¼‰ -->
            {{ with .Lastmod }}
            <meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05-07:00" }}" />
            {{ end }}
        </header>

        <!-- å†…å®¹æ—¶æ•ˆæ€§æç¤º -->
        {{ $daysSinceUpdate := div (now.Sub .Lastmod).Hours 24 | math.Round }}
        {{ $recentThreshold := .Site.Params.contentFreshness.recentThreshold | default 180 }}
        {{ $expiryThreshold := .Site.Params.contentFreshness.expiryThreshold | default 365 }}

        {{ if lt $daysSinceUpdate $recentThreshold }}
            <div class="alert alert-info" role="alert">
                 å†…å®¹ä¿æŒæ›´æ–°ï¼æœ€åä¿®è®¢äº <strong>{{ .Lastmod.Format "2006-01-02" }}</strong>
            </div>
        {{ else if lt $daysSinceUpdate $expiryThreshold }}
            <div class="alert alert-warning" role="alert">
                 å†…å®¹ç•¥æ˜¾é™ˆæ—§ï¼æœ€åæ›´æ–°äº <strong>{{ .Lastmod.Format "2006-01-02" }}</strong>ï¼ˆ{{ $daysSinceUpdate }} å¤©å‰ï¼‰
                
            </div>
        {{ else }}
            <div class="alert alert-danger" role="alert">
                 å†…å®¹å·²è¿‡æœŸï¼æœ€åæ›´æ–°äº <strong>{{ .Lastmod.Format "2006-01-02" }}</strong>ï¼ˆ{{ $daysSinceUpdate }} å¤©å‰ï¼‰
                
            </div>
        {{ end }}

        <!-- å¤šè¯­è¨€ç‰ˆæœ¬æç¤º -->
        {{ if .IsTranslated }}
        <div class="translatedCard">
            <h4> å…¶ä»–è¯­è¨€ç‰ˆæœ¬</h4>
            <ul>
                {{ range .Translations }}
                <li>
                    <a href="{{ .Permalink }}">{{ .Lang | upper }}: {{ .Title }}</a>
                </li>
                {{ end }}
            </ul>
        </div>
        {{ end }}

        <!-- ç›®å½• -->
        {{- $TOCEnabled := or .Params.toc (and .Site.Params.toc (ne .Params.toc false)) -}}
        {{- $hasTOC := gt (len .TableOfContents) 32 -}}
        {{ if and $TOCEnabled $hasTOC -}}
        <details class="toc">
            <summary class="toc-title"> ç›®å½•</summary>
            {{ .TableOfContents }}
        </details>
        {{- end }}

        <!-- æ­£æ–‡å†…å®¹ -->
        <div class="article--body grap">
            {{ .Content }}
        </div>

        <!-- ç‚¹èµåŠŸèƒ½ 
        {{ if .Site.Params.post_like }}
        <div class="post--single__action">
            <button class="button--like like-btn" aria-label="ç‚¹èµ">
                <svg class="icon--active" viewBox="0 0 1024 1024" width="32" height="32">
                    <path d="M780.8..."></path>
                </svg>
                <svg class="icon--default" viewBox="0 0 1024 1024" width="32" height="32">
                    <path d="M332.8..."></path>
                </svg>
                <span class="count"></span> ğŸ‘
            </button>
        </div>
        {{ end }} -->

        <!-- æ ‡ç­¾ -->
        <div class="article--tags u-paddingTop20">
            {{ range (.GetTerms "tags") }}
            <a href="{{ .RelPermalink }}" class="artile--tag">
                <span>#</span>{{ .LinkTitle }}
            </a>
            {{ end }}
        </div>

        <!-- ç‰ˆæƒå£°æ˜ -->
        {{ if .Params.cc }}
        <div class="article--copyright">
            <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" rel="noopener follow" target="_blank">
                Â© æœ¬æ–‡é‡‡ç”¨ CC BY-NC-ND 4.0 è®¸å¯
            </a>
            <!-- ç‰ˆæƒå›¾æ ‡ä¿ç•™ -->
            <svg width="21" height="21"><path...></svg>
            <svg width="21" height="21"><path...></svg>
            <svg width="21" height="21"><path...></svg>
        </div>
        {{ end }}

        <!-- ç›¸å…³æ–‡ç«  -->
        {{ partial "related.html" . }}

        <!-- è¯„è®ºç³»ç»Ÿ -->
        <div class="comments-section">
            <input type="checkbox" id="comments-toggle" class="comments-toggle" />
            <label for="comments-toggle" class="comments-button">
                ğŸ’¬ ç‚¹å‡»å±•å¼€è¯„è®º{{ .Site.Params.artalk.commentCount }}
            </label>
            <div id="comments" class="comments-hidden">
                {{- partial "comment/artalk" . -}}
            </div>
        </div>
    </div>
</div>
{{ end }}